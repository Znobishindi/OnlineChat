# Сетевой чат

### Описание

Данная программа реализует возможность отправки сообщений от клиента ко всем клиентам, находящимся в чате, через сервер.

Каждый клиент при входе в чат должен указать свое имя, которое будет видно всем участникам при отправке им сообщений. 
При добавлении нового клиента, всем существующим клиентам придет оповещение, что их ряды пополнены, а также информация о
текущем общем количестве участников.

Сервер также записывает всю информацию, происходящую внутри него.

Логи всех действий записываются в отдельном файле, который автоматически создается при первом запуске программы.

Номер порта для создания сокетов хранится в отдельном файле Settings.txt

Для выхода из программы пользователю необходимо ввести в консоли /stop

### Принцип работы программы

* Серверная часть

Для запуска программы в первую очередь необходимо запустить сервер, как ни странно, в классе Server))).

При его запуске создается ServerSocket в единственном экземпляре. Далее в бесконечном цикле сервер ждет подключения новых клиентов.
Как только это произошло, создается экземпляр серверного помощника (ServerHandler), основная задача которого, слушать своего клиента, привязанного к нему через сокет.
Экземпляр ServerHandler складывается в коллекцию LinkedList, что дает возможность направлять сообщения от одного клиента всем остальным.
За это отвечает метод send в классе ServerHandler, помещенный в цикл for, перебирающий все экземпляры ServerHandler в коллекции LinkedList.

Сам ServerHandler наследуется от Thread, что позволяет переопределить метод run(), и запустить его через конструктор при создании экземпляра серверного помощника.

Как только ServerHandler услышит от клиента заклинание /stop, то сразу начнет процесс самоликвидации с помощью метода deleteService(), 
закрывая сокет, а так же инструменты чтения и отправки сообщений BufferedReader и BufferedWriter.

* Клиентская часть

Клиент запускается в классе Client. Он нужен только для того, что бы создать экземпляр класса Person, который принимает параметрами свое имя (просит его ввести), а так же Host (ip) и № порта.

В классе Person как раз и заложено поведение клиента. Внутри него есть два приватных класса, наследуемых от Thread, описывающих поведение потоков.
Класс-поток ReadMsg читает сообщения, полученные от сервера, в бесконечном цикле.  Класс-поток WriteMsg отправляет сообщения, полученные из консоли, в бесконечном цикле на сервер.

При создании экземпляра Person создается сокет для связи с сервером (через личный ServerHandler), а также запускаются потоки WriteMsg и ReadMsg, описанные выше.

Как и в случае с ServerHandler, при написании клиентом волшебного слова \stop, останавливаются потоки WriteMsg и ReadMsg, сокет, а так же инструменты чтения и отправки сообщений BufferedReader и BufferedWriter.

